@model IEnumerable<KidShop.Models.tbl_Video>
@using KidShop.Models;
@using KidShop.Utilities;

<!-- Breadcrumb Section Begin -->
<section class="breadcrumb-section set-bg" data-setbg="/img/breadcrumb.jpg">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <div class="breadcrumb__text">
                    <h2>Các video cho bé</h2>
                    <div class="breadcrumb__option">
                        <a asp-controller="Home" asp-action="Index">Trang chủ</a>
                        <span>Các video cho bé</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Breadcrumb Section End -->

<!-- Video Section Begin -->
<section class="video-list spad">
    <div class="container">

        <!-- Tiêu đề -->
        <div class="row mb-4">
            <div class="col-lg-12 text-center">
                <h2 class="section-title">Danh Sách Video</h2>
                <p>Xem các video nổi bật và mới nhất</p>
            </div>
        </div>

        <!-- Thanh tìm kiếm -->
        <div class="row mb-4">
            <div class="col-lg-8 col-md-10 mx-auto">
                <form asp-action="Index" asp-controller="Video" class="d-flex justify-content-center" method="get">
                    <input type="text" name="keyword" class="form-control me-2" placeholder="🔍 Tìm kiếm video..." value="@ViewBag.Keyword"
                           style="border-radius: 30px; padding: 8px 16px; font-size: 15px;">
                    <button type="submit"><span class="icon_search"></span></button>
                </form>
            </div>
        </div>

        <!-- Danh sách phân loại -->
        <div class="row mb-4">
            <div class="col-lg-12 text-center">
                <div class="btn-group flex-wrap" role="group" aria-label="Phân loại video">
                    @foreach (var cat in ViewBag.Categories)
                    {
                        <a href="@Url.Action("Index", new { categoryId = cat.Category_VideoID })"
                           class="btn btn-outline-primary m-1 @(ViewBag.SelectedCategory == cat.Category_VideoID ? "active" : "")">
                            @cat.Title
                        </a>
                        
                    }
                </div>
            </div>
        </div>

        <!-- Danh sách video -->
        <div class="row">
           @if (Model != null && Model.Any())
            {
                  @foreach (var video in Model)
                  {
                        <!-- Video item -->
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="video__item card shadow-sm border-0 h-100">
                                <div class="video__thumb position-relative overflow-hidden" style="border-radius: 10px 10px 0 0;">
                                <iframe width="100" height="220" src="@video.Link" title="@video.Title"
                                            frameborder="0" allowfullscreen style="display:block; width:100%;">
                                    </iframe>

                                    <span class="video__duration badge bg-dark position-absolute"
                                          style="bottom:10px; right:10px;">@video.DurationDisplay</span>
                                </div>

                                <div class="card-body">
                                     <h5 class="card-title text-truncate" title="@video.Title">
                                         <a asp-controller="Video" asp-action="VideoDetail" asp-route-id="@video.VideoID">@video.Title</a>
                                    </h5>
 
                                        <!-- Nút xem trên YouTube -->
                                        <a href="@video.Link" class="btn btn-sm btn-outline-primary" target="_blank">
                                            Xem trên YouTube
                                        </a>
 
                                </div>

                                <div class="card-footer bg-white border-0 text-muted small">
                                        <i class="fa fa-calendar"></i> @video.CreatedDate?.ToString("dd/MM/yyyy")
                                </div>
                            </div>
                        </div>
                        <!-- /Video item -->
                 
                  }
            }
            else
            {
                <div class="col-12 text-center">
                    <p style="font-size:18px; color:#888; margin-top:20px;">❌ Không tìm thấy video phù hợp</p>
                </div>
            }
        </div>

        <!-- Phân trang -->
        <div class="row mt-4">
            <div class="col-lg-12 text-center">
               <div class="product__pagination d-inline-block">
                    @for (int i = 1; i <= ViewBag.TotalPages; i++)
                    {
                        <a class="@(i == ViewBag.CurrentPage ? "active" : "")"
                           href="@Url.Action("Index", new { 
                               page = i, 
                               categoryId = ViewBag.SelectedCategory,
                               keyword = ViewBag.Keyword
                           })">@i</a>
                    }
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Video Section End -->